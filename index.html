<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>IA Completa</title>

<style>
body { background:#0e0e0e; font-family:Arial; color:#fff; }
.chat { width:520px; margin:40px auto; background:#1a1a1a; padding:20px; border-radius:10px; }
#msgs { height:380px; overflow-y:auto; }
.user { color:#00ff88; margin:6px 0; }
.ia { color:#00aaff; margin:6px 0 12px; }
input { width:100%; padding:12px; border:none; border-radius:6px; }
</style>
</head>

<body>

<div class="chat">
  <h2>ü§ñ IA COMPLETA</h2>
  <div id="msgs"></div>
  <input
    id="msg"
    placeholder="Digite e aperte ENTER"
    onkeydown="if(event.key==='Enter') enviar()"
  >
</div>

<!-- üîΩ O SCRIPT VAI AQUI üîΩ -->
<script>
const usuario = "usuario_padrao";

async function enviar(){
  const input = document.getElementById("msg");
  const texto = input.value.trim();
  if(!texto) return;

  const msgs = document.getElementById("msgs");
  msgs.innerHTML += `<div class="user">Voc√™: ${texto}</div>`;
  input.value = "";

  try {
    const res = await fetch("http://127.0.0.1:8000/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        usuario: usuario,
        mensagem: texto
      })
    });

    if(!res.ok) {
      throw new Error("Erro HTTP " + res.status);
    }

    const data = await res.json();
    msgs.innerHTML += `<div class="ia">IA: ${data.resposta}</div>`;
  } catch (err) {
    msgs.innerHTML += `<div class="ia">‚ùå ERRO: ${err.message}</div>`;
  }

  msgs.scrollTop = msgs.scrollHeight;
}
</script>

</body>
</html>
